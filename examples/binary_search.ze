proc binary_search(value, values, comparator){
    mut start = 0;
    mut end = values.len() - 1;

    while(start <= end){
        imut mid_idx = start + (end - start) / 2;
        imut mid = values[mid_idx];
        imut comparison = comparator(value, mid);

        if(comparison <= -1){
            end = mid_idx - 1;
        }elif(comparison >= 1){
            start = mid_idx + 1;
        }else{
            ret mid_idx;
        }
    }

    ret -1;
}

imut values = array(83, 605, 774, 776, 791, 1026, 1123, 1221, 1536, 1606, 1618, 1668, 1813, 1833, 1883, 1902, 2085, 2235, 2308, 2399, 2494, 2621, 2622, 2767, 2908, 2986, 3160, 3180, 3249, 3355, 3467, 3552, 3892, 3928, 3932, 4029, 4074, 4179, 4203, 4275, 4341, 4381, 4574, 4588, 4606, 4625, 5018, 5110, 5156, 5258, 5377, 5401, 5463, 5558, 5579, 5637, 5720, 5741, 5952, 5964, 5997, 6011, 6041, 6074, 6093, 6143, 6185, 6265, 6278, 6386, 6763, 6846, 6908, 6946, 7056, 7091, 7202, 7294, 7331, 7383, 7386, 7441, 7477, 7531, 7605, 7637, 7646, 7681, 7777, 7791, 7870, 7908, 7943, 8062, 8102, 8289, 8482, 8546, 8631, 8767, 8971, 9254, 9331, 9425, 9584, 9748, 9855);
imut value_idx = binary_search(4381, values, anon(a, b){
    if(a < b){
        ret -1;
    }elif(a > b){
        ret 1;
    }else{
        ret 0;
    }
});

println("index: " .. to_str(value_idx));
println("value: " .. (value_idx != -1 ? to_str(values[value_idx]) : "not found"));